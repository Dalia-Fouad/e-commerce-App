import{a as T}from"./chunk-YT3NGYPD.js";import{a as k,b as c,c as N,d as M,h as A,i as q,j as D,k as R,m as G}from"./chunk-TFPA5QCA.js";import{g as E,h as L}from"./chunk-ZARZFIJP.js";import{Cb as m,Db as w,Jb as b,Mb as y,Na as s,Z as f,aa as F,db as g,fb as v,jb as p,jc as x,nb as o,ob as t,pb as h,ub as S,vb as C}from"./chunk-VV2C2VWU.js";var V=(e,n)=>({"is-valid":e,"is-invalid":n});function j(e,n){e&1&&(o(0,"p",17),m(1,"email is required"),t())}function B(e,n){e&1&&(o(0,"p",17),m(1,"Enter Valid Email "),t())}function I(e,n){if(e&1&&(o(0,"div",9),g(1,j,2,0,"p",17)(2,B,2,0),t()),e&2){let a,l=C();s(),p(1,(a=l.loginForm.get("email"))!=null&&a.getError("required")?1:(a=l.loginForm.get("email"))!=null&&a.getError("email")?2:-1)}}function P(e,n){e&1&&(o(0,"p",17),m(1,"password is required"),t())}function O(e,n){e&1&&(o(0,"p",17),m(1,"must be at least 6 chars"),t())}function U(e,n){if(e&1&&(o(0,"div",9),g(1,P,2,0,"p",17)(2,O,2,0),t()),e&2){let a,l=C();s(),p(1,(a=l.loginForm.get("password"))!=null&&a.getError("required")?1:(a=l.loginForm.get("password"))!=null&&a.getError("pattern")?2:-1)}}function $(e,n){if(e&1&&(o(0,"div",14),m(1),t()),e&2){let a=C();s(),w(a.errorMessage)}}var Z=(()=>{let n=class n{constructor(){this._FormBuilder=f(R),this._AuthService=f(T),this._Router=f(E),this.errorMessage="",this.isloading=!1,this.loginForm=this._FormBuilder.group({email:[null,[c.required,c.email]],password:[null,[c.required,c.pattern(/^\w{6,}$/)]]})}loginSubmit(){this.loginForm.valid?(this.isloading=!0,this.Subscrip=this._AuthService.setloginForm(this.loginForm.value).subscribe({next:l=>{console.log(l),console.log(l.token),this.errorMessage="",this.isloading=!1,localStorage.setItem("userToken",l.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"])},error:l=>{console.log(l.error.message),this.errorMessage=l.error.message,this.isloading=!1}})):this.loginForm.markAllAsTouched()}ngOnDestroy(){this.Subscrip?.unsubscribe()}};n.\u0275fac=function(_){return new(_||n)},n.\u0275cmp=F({type:n,selectors:[["app-login"]],standalone:!0,features:[b],decls:24,vars:9,consts:[[1,"mx-auto","my-5"],[1,"row","justify-content-between","align-items-center"],[1,"col-md-6","card","shadow-main","mx-auto","order-1"],[1,"card-body","px-0","py-4","p-sm-4","d-flex","flex-column","justify-content-evenly"],[1,"text-main"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","email"],["type","text","id","email","formControlName","email",1,"form-control",3,"ngClass"],[1,"alert","alert-danger","w-100","mt-1"],["for","password"],["type","password","id","password","formControlName","password",1,"form-control"],["type","submit",1,"btn-main","w-100","my-3",3,"disabled"],["routerLink","/forgotPassword",1,"link-primary","text-center","d-block",2,"cursor","pointer"],[1,"alert","alert-danger","w-50"],[1,"col-md-6","d-none","d-sm-block","order-sm-2","order-md-0"],["src","./assets/images/signin-g.svg","alt"," login photo",1,"w-75"],[1,"m-0"]],template:function(_,i){if(_&1&&(o(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),m(5,"Login Now :"),t(),o(6,"form",5),S("ngSubmit",function(){return i.loginSubmit()}),o(7,"div",6)(8,"label",7),m(9,"email:"),t(),h(10,"input",8),g(11,I,3,1,"div",9),t(),o(12,"div",6)(13,"label",10),m(14,"password:"),t(),h(15,"input",11),g(16,U,3,1,"div",9),t(),o(17,"button",12),m(18,"Login "),t(),o(19,"a",13),m(20," Forgot Password ?"),t(),g(21,$,2,1,"div",14),t()()(),o(22,"div",15),h(23,"img",16),t()()()),_&2){let r,d,u;s(6),v("formGroup",i.loginForm),s(4),v("ngClass",y(6,V,!((r=i.loginForm.get("email"))!=null&&r.errors)&&(((r=i.loginForm.get("email"))==null?null:r.touched)||((r=i.loginForm.get("email"))==null?null:r.dirty)),((r=i.loginForm.get("email"))==null?null:r.errors)&&(((r=i.loginForm.get("email"))==null?null:r.touched)||((r=i.loginForm.get("email"))==null?null:r.dirty)))),s(),p(11,(d=i.loginForm.get("email"))!=null&&d.errors&&((d=i.loginForm.get("email"))!=null&&d.touched||(d=i.loginForm.get("email"))!=null&&d.dirty)?11:-1),s(5),p(16,(u=i.loginForm.get("password"))!=null&&u.errors&&((u=i.loginForm.get("password"))!=null&&u.touched||(u=i.loginForm.get("password"))!=null&&u.dirty)?16:-1),s(),v("disabled",i.isloading),s(4),p(21,i.errorMessage?21:-1)}},dependencies:[G,A,k,N,M,q,D,x,L]});let e=n;return e})();export{Z as LoginComponent};
